{"ast":null,"code":"var _jsxFileName = \"/Users/osvaldo.lievano/Front-End/anywherefit/src/components/register.js\";\nimport React, { useState, useEffect } from \"react\";\nimport { Card, Form, Input, Label, Button, FormGroup } from \"reactstrap\";\nimport * as yup from 'yup';\nimport axios from \"axios\";\nimport { useHistory } from 'react-router-dom';\nimport './styles/registerLogin.css';\n\nconst Register = () => {\n  const [signUp, setSignUp] = React.useState({\n    name: '',\n    username: '',\n    password: '',\n    role: \"\" //role has to be string for api\n\n    /*{\n        instructor:false,\n        client:false \n    }*/\n\n  }); // state disabled for button\n\n  const [isDisabled, setisDisabled] = useState(true); //set errors array to log errors\n\n  const [errors, setErrors] = useState({\n    name: \"\",\n    username: \"\",\n    password: \"\",\n    role: \"\"\n  }); //state for server side errors\n  //const [serverError, setServerError] = useState('');\n  // change the value of the field to equal user input\n\n  const handleChange = e => {\n    setSignUp({ ...signUp,\n      [e.target.name]: e.target.value\n    });\n    e.persist();\n    validateChanges(e);\n    console.log(errors); // validateChanges(e)\n  }; //     const handleChecked = (e) => {\n  // setSignUp({\n  //     ...signUp,\n  //     [e.target.name]:e.target.checked\n  // })\n  //     }\n  // post to DB when available\n\n\n  const history = useHistory();\n\n  const submitForm = e => {\n    e.preventDefault();\n    console.log(signUp);\n    axios.post(\"https://pt-anywhere-fitness.herokuapp.com/api/users/register\", signUp).then(res => {\n      console.log(\"returned data from post\", res.data);\n      history.push('/login');\n    }).catch(err => {\n      console.log(err);\n    });\n  }; //when all forms are valid submit is no longer disabled\n\n\n  useEffect(() => {\n    formSchema.isValid(signUp).then(valid => setisDisabled(!valid));\n  }, [signUp]);\n\n  const validateChanges = e => {\n    e.persist();\n    yup.reach(formSchema, e.target.name).validate(e.target.value).then(valid => setErrors({ ...errors,\n      [e.target.name]: ''\n    })).catch(err => setErrors({ ...errors,\n      [e.target.name]: err.errors[0]\n    }));\n  };\n\n  const formSchema = yup.object().shape({\n    name: yup.string().required(\"name required\"),\n    username: yup.string().required('Username required'),\n    password: yup.string().required('Password Required').min(5, 'password too short'),\n    role: yup.string()\n  });\n  return /*#__PURE__*/React.createElement(Card, {\n    className: \"form-card\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 1\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    className: \"form-h2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 5\n    }\n  }, \"Get Started\"), /*#__PURE__*/React.createElement(Form, {\n    onSubmit: submitForm,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(FormGroup, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Label, {\n    for: \"name\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 13\n    }\n  }, \"Full Name: \"), /*#__PURE__*/React.createElement(Input, {\n    type: \"text\",\n    \"data-cy\": \"name\",\n    name: \"name\",\n    id: \"name\",\n    placeholder: \"Full Name\",\n    value: signUp.name,\n    onChange: handleChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 13\n    }\n  })), /*#__PURE__*/React.createElement(FormGroup, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Label, {\n    htmlFor: \"username\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 9\n    }\n  }, \"Username: \"), /*#__PURE__*/React.createElement(Input, {\n    type: \"text\",\n    \"data-cy\": \"username\",\n    name: \"username\",\n    id: \"username\",\n    placeholder: \"username\",\n    value: signUp.username,\n    onChange: handleChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 9\n    }\n  })), /*#__PURE__*/React.createElement(FormGroup, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Label, {\n    htmlFor: \"password\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 9\n    }\n  }, \"Password: \"), /*#__PURE__*/React.createElement(Input, {\n    type: \"password\",\n    \"data-cy\": \"password\",\n    name: \"password\",\n    placeholder: \"password\",\n    id: \"password\",\n    value: signUp.password,\n    onChange: handleChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 9\n    }\n  })), /*#__PURE__*/React.createElement(FormGroup, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Label, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 9\n    }\n  }, \"User Type\", /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 25\n    }\n  }), /*#__PURE__*/React.createElement(\"select\", {\n    id: \"role\",\n    name: \"role\",\n    \"data-cy\": \"role\",\n    onChange: handleChange,\n    value: signUp.role,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"option\", {\n    value: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 17\n    }\n  }, \"Select\"), /*#__PURE__*/React.createElement(\"option\", {\n    value: \"client\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 17\n    }\n  }, \"Client\"), /*#__PURE__*/React.createElement(\"option\", {\n    value: \"instructor\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 17\n    }\n  }, \"Instructor\")))), /*#__PURE__*/React.createElement(Button, {\n    className: \"form-submit\",\n    type: \"submit\",\n    \"data-cy\": \"submit\",\n    disabled: isDisabled,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 9\n    }\n  }, \"Sign Up\")));\n};\n\nexport default Register;","map":{"version":3,"sources":["/Users/osvaldo.lievano/Front-End/anywherefit/src/components/register.js"],"names":["React","useState","useEffect","Card","Form","Input","Label","Button","FormGroup","yup","axios","useHistory","Register","signUp","setSignUp","name","username","password","role","isDisabled","setisDisabled","errors","setErrors","handleChange","e","target","value","persist","validateChanges","console","log","history","submitForm","preventDefault","post","then","res","data","push","catch","err","formSchema","isValid","valid","reach","validate","object","shape","string","required","min"],"mappings":"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","sourcesContent":["import React, {useState,useEffect} from \"react\";\nimport { Card, Form, Input, Label, Button, FormGroup } from \"reactstrap\";\nimport * as yup from 'yup';\nimport axios from \"axios\";\nimport {useHistory} from 'react-router-dom';\nimport './styles/registerLogin.css';\n\nconst Register = () => {\n    \n    const [signUp, setSignUp] = React.useState({\n        name:'',\n        username:'',\n        password:'',\n        role: \"\",\n        //role has to be string for api\n        /*{\n            instructor:false,\n            client:false \n        }*/\n    });\n\n    // state disabled for button\n    const [isDisabled,setisDisabled] = useState(true);\n\n    //set errors array to log errors\n    const [errors,setErrors] = useState({\n        name:\"\",\n        username:\"\",\n        password:\"\",\n        role:\"\"\n    })\n    \n//state for server side errors\n//const [serverError, setServerError] = useState('');\n\n\n    // change the value of the field to equal user input\n    const handleChange = (e) => {\n        setSignUp({\n            ...signUp,\n            [e.target.name]:e.target.value\n        })\n        e.persist();\n        validateChanges(e)\n        console.log(errors);\n        // validateChanges(e)\n    }\n\n//     const handleChecked = (e) => {\n// setSignUp({\n//     ...signUp,\n//     [e.target.name]:e.target.checked\n// })\n//     }\n    // post to DB when available\n\nconst history = useHistory();\n\n    const submitForm = (e) => {\n        e.preventDefault();\n        console.log(signUp);\n        axios\n        .post(\"https://pt-anywhere-fitness.herokuapp.com/api/users/register\", signUp)\n        .then((res) => {\n            console.log(\"returned data from post\", res.data);\n            history.push('/login');\n        })\n        .catch((err) => {\n            console.log(err);\n        })\n    }\n\n    //when all forms are valid submit is no longer disabled\n\n\n      useEffect(() => {\n              formSchema.isValid(signUp).then((valid) => setisDisabled(!valid));\n          },[signUp])\n\n    const validateChanges= (e) =>{\n        e.persist()\n        yup.reach(formSchema,e.target.name).validate(e.target.value)\n        .then(valid => setErrors({...errors,[e.target.name]:''}))\n        .catch(err => setErrors({...errors,[e.target.name]:err.errors[0]}))\n    }\n\n    const formSchema = yup.object().shape({\n        name:yup.string().required(\"name required\"),\n        username:yup.string().required('Username required'),\n        password:yup.string().required('Password Required').min(5,'password too short'),\n        role:yup.string()\n    })\n\nreturn (\n<Card className=\"form-card\">\n    <h2 className=\"form-h2\">Get Started</h2>\n    <Form onSubmit={submitForm}>\n        <FormGroup>\n            <Label for=\"name\">Full Name: </Label>\n            <Input type=\"text\"\n        data-cy=\"name\"\n        name = \"name\"\n        id=\"name\"\n        placeholder=\"Full Name\"\n        value={signUp.name}\n        onChange={handleChange}/>\n        </FormGroup>\n        <FormGroup>\n        <Label htmlFor=\"username\">Username: </Label>\n        <Input type=\"text\"\n        data-cy=\"username\"\n        name = \"username\"\n        id=\"username\"\n        placeholder=\"username\"\n        value={signUp.username}\n        onChange={handleChange}/>\n        </FormGroup>\n        <FormGroup>\n        <Label htmlFor=\"password\">Password: </Label>\n        <Input type=\"password\"\n        data-cy=\"password\"\n        name=\"password\"\n        placeholder=\"password\"\n        id=\"password\"\n        value={signUp.password}\n        onChange={handleChange}/>\n        </FormGroup>\n        <FormGroup>\n        <Label>User Type<br/>\n            <select id=\"role\" name=\"role\"data-cy=\"role\" onChange={handleChange} value={signUp.role}>\n                <option value=''>Select</option>\n                <option value=\"client\">Client</option>\n                <option value=\"instructor\">Instructor</option>\n            </select>\n        </Label>\n        </FormGroup>\n\n        <Button className=\"form-submit\" type=\"submit\" data-cy=\"submit\" disabled={isDisabled}>Sign Up</Button>\n    </Form>\n</Card>\n)\n}\n\nexport default Register;"]},"metadata":{},"sourceType":"module"}